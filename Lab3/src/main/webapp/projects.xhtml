<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui" xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/composite">
<f:view  locale="#{localeBean.currentLocale}">
<h:head>
    <title>#{msgs.projectsTitle}</title>
</h:head>
<h:body>
    <p:dialog header="#{msgs.editProject}" widgetVar="editProjectDialog" modal="true" resizable="false">
        <h:form id="editForm">
            <p:panelGrid columns="2">
                <h:outputLabel for="editName" value="#{msgs.projectName}" />
                <p:inputText id="editName" value="#{projectBean.selectedProject.name}" />

                <h:outputLabel for="editCategory" value="#{msgs.projectCategory}" />
                <p:selectOneMenu id="editCategory" value="#{projectBean.selectedProject.category}">
                    <f:selectItem itemLabel="#{msgs.selectCategory}" itemValue="" />
                    <f:selectItem itemLabel="#{msgs.easy}" itemValue="Easy" />
                    <f:selectItem itemLabel="#{msgs.medium}" itemValue="Medium" />
                    <f:selectItem itemLabel="#{msgs.hard}" itemValue="Hard" />
                </p:selectOneMenu>

                <h:outputLabel for="editDescription" value="#{msgs.projectDescription}" />
                <p:inputText id="editDescription" value="#{projectBean.selectedProject.description}" />

                <h:outputLabel for="editDeadline" value="#{msgs.projectDeadline}" />
                <p:calendar id="editDeadline" value="#{projectBean.deadline}" showOn="button" />

                <p:commandButton value="#{msgs.save}" actionListener="#{projectBean.saveEditedProject}" update="editForm"  oncomplete="PF('editProjectDialog').hide()" />
            </p:panelGrid>
        </h:form>
    </p:dialog>
    <p:dialog header="#{msgs.addProjectButton}" widgetVar="projectDialog" modal="true" resizable="false">
    <h:form >
        <p:panelGrid columns="2">
            <h:outputLabel for="name" value="#{msgs.projectName}"/>
            <p:inputText id="name" value="#{projectBean.name}" />

            <h:outputLabel for="category" value="#{msgs.projectCategory}" />
            <p:selectOneMenu id="category" value="#{projectBean.category}">
                <f:selectItem itemLabel="#{msgs.selectCategory}" itemValue="" />
                <f:selectItem itemLabel="#{msgs.easy}" itemValue="Easy" />
                <f:selectItem itemLabel="#{msgs.medium}" itemValue="Medium" />
                <f:selectItem itemLabel="#{msgs.hard}" itemValue="Hard" />
            </p:selectOneMenu>

            <h:outputLabel for="description" value="#{msgs.projectDescription}" />
            <p:inputText id="description" value="#{projectBean.description}" />

            <h:outputLabel for="deadline" value="#{msgs.projectDeadline}" />
            <p:calendar id="deadline" value="#{projectBean.deadline}" showOn="button" />

            <p:commandButton value="#{msgs.save}" action="#{projectBean.saveProject}" update="form" oncomplete="PF('projectDialog').hide()" />
        </p:panelGrid>
    </h:form>
</p:dialog>
    <h:form id="form">
        <p:commandButton value="#{msgs.backToWelcomePageButton}" action="backToIndex" icon="pi pi-arrow-left" styleClass="p-button p-button-rounded"  style="margin-right: 10px;"/>
        <p:commandButton value="#{msgs.addProjectButton}" oncomplete="PF('projectDialog').show()"  style="margin-right: 10px;"/>
    </h:form>
    !-- Include the DataTable using the template -->
    <ui:composition xmlns="http://www.w3.org/1999/xhtml"
                    xmlns:h="http://xmlns.jcp.org/jsf/html"
                    xmlns:p="http://primefaces.org/ui"
                    xmlns:ui="http://xmlns.jcp.org/jsf/facelets">

        <ui:decorate template="/WEB-INF/templates/dataView.xhtml">
            <ui:define name="columns">
                <p:dataTable var="project" value="#{projectBean.projects}">
                    <p:column headerText="#{msgs.projectID}">
                        <h:outputText value="#{project.id}"/>
                    </p:column>
                    <p:column headerText="#{msgs.projectName}">
                        <h:outputText value="#{project.name}"/>
                    </p:column>
                    <p:column headerText="#{msgs.projectCategory}">
                        <h:outputText value="#{project.category}"/>
                    </p:column>
                    <p:column headerText="#{msgs.projectDescription}">
                        <h:outputText value="#{project.description}"/>
                    </p:column>
                    <p:column headerText="#{msgs.projectDeadline}">
                        <h:outputText value="#{project.deadline}"/>
                    </p:column>
                    <p:column headerText="#{msgs.editProject}">
                        <p:commandButton value="#{msgs.editProjectButton}" actionListener="#{projectBean.openEditDialog(project)}" oncomplete="PF('editProjectDialog').show()" update="form" />
                    </p:column>
                    <p:column headerText="#{msgs.deleteProject}">
                        <p:commandButton value="#{msgs.deleteProjectButton}" actionListener="#{projectBean.deleteProject(project)}" update="form" />
                    </p:column>
                </p:dataTable>
            </ui:define>
        </ui:decorate>

    </ui:composition>



</h:body>
</f:view>
</html>